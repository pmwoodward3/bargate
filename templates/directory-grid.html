<style type="text/css">

.dentry {
  position: relative;
  float: left;
  width: 150px;
  height: 150px;
  margin: 20px;
  text-align: center;
  cursor: pointer;
}

.dentry-img
{
  color: #262524;
-webkit-box-shadow: 0px 0px 1px 1px rgba(0,0,0,0.5);
-moz-box-shadow: 0px 0px 1px 1px rgba(0,0,0,0.5);
box-shadow: 0px 0px 1px 1px rgba(0,0,0,0.5);
border-radius: 10px;

  width: 150px;
  height: 130px;
}

.img-responsive
{
	margin-left: auto;
	margin-right: auto;
	margin-top: auto;
	margin-bottom: auto;
}

.dentry-icon
{
  color: #262524;
-webkit-box-shadow: 0px 0px 1px 1px rgba(0,0,0,0.5);
-moz-box-shadow: 0px 0px 1px 1px rgba(0,0,0,0.5);
box-shadow: 0px 0px 1px 1px rgba(0,0,0,0.5);
border-radius: 10px;
  width: 150px;
  height: 130px;
	padding-left: 35px;
	padding-right: 35px;
	padding-top: 30px;
	padding-bottom: 25px;
	font-size: 50px;
}
.dentry-label
{
  padding: 1px;
}

</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/2.0.0/isotope.pkgd.min.js"></script>
<script src="/static/js/bootstrap-contextmenu.js"></script>

	      <div id="context-menu">
	      	<ul class="dropdown-menu" role="menu">
            <li><a tabindex="-1">Action</a></li>
	           <li><a tabindex="-1">Another action</a></li>
	           <li><a tabindex="-1">Something else here</a></li>
	           <li class="divider"></li>
	           <li><a tabindex="-1">Separated link</a></li>
	      	</ul>
	      </div>

<script type="text/javascript">
$(document).ready(function ()
{
	var $container = $('#directory').isotope(
	{
		getSortData:
		{
			name: '.name',
			type: '[data-type]',
			mtime: '[data-rawmtime] parseInt',
			size: '[data-rawsize] parseInt',
		},
		transitionDuration: '0',
		sortAscending:
		{
    		name: true,
			type: true,
			mtime: false,
			size: false
		}
	});

	$('#sorts').on( 'click', 'button', function()
	{
		var sortByValue = $(this).attr('data-sort-by');
		$container.isotope({ sortBy: sortByValue });
	});
});
</script>

<h2><i class="fa fa-fw fa-sort"></i> Sort</h2>
<div id="sorts" class="button-group btn-group">  
  <button class="button is-checked btn btn-default" data-sort-by="original-order">original order</button>
  <button class="button btn btn-default" data-sort-by="name">name</button>
  <button class="button btn btn-default" data-sort-by="type">type</button>
  <button class="button btn btn-default" data-sort-by="mtime">mtime</button>
  <button class="button btn btn-default" data-sort-by="size">size</button>
</div>


<div id="directory">

		{%- for entry in entries -%}


		{%- if entry.type == 'file' -%}
			{%- if on_file_click == 'ask' %}
				<div data-toggle="context" data-target="#context-menu" class="dentry dentry-preview" data-type="{{entry.type}}" data-rawmtime="{{ entry.mtime_raw }}" data-rawsize="{{ entry.size_raw }}" data-icon="{{entry.icon}}" {% if entry.img_preview %}data-imgpreview="{{ entry.img_preview }}" {%endif%} {% if entry.bdownload %}data-view="{{ entry.bdownload }}" {%endif%} data-download="{{ entry.download }}" data-mtype="{{entry.mtype}}" data-props="{{ entry.view }}" data-filename="{{entry.name}}" data-mtime="{{entry.mtime}}" data-size="{{entry.size}}" data-path="{{entry.path}}" data-url="{{ entry.default_open}}">
			{%- else %}
				<div data-toggle="context" data-target="#context-menu" class="dentry dentry-open" data-type="{{entry.type}}" data-rawmtime="{{ entry.mtime_raw }}" data-rawsize="{{ entry.size_raw }}" data-url="{{ entry.on_file_click }}" data-filename="{{entry.name}}" data-path="{{entry.path}}">
			{%- endif %}
		{%- else -%}
			<div data-toggle="context" data-target="#context-menu" class="dentry dentry-open" data-type="{{entry.type}}" data-rawmtime="0" data-rawsize="0" data-url="{{ entry.default_open }}" data-filename="{{entry.name}}" data-path="{{entry.path}}">
		{%- endif %}

			{% if entry.img_preview %}
			<div class="dentry-img" style="overflow: hidden">
				<img src="{{ entry.img_preview }}" class="img-responsive"/>
			</div>
			{%else%}
			<div class="dentry-icon">
					<span class="{{ entry.icon }}"></span>
			</div>
			{%endif%}
			<div class="name dentry-label">{{ entry.name|truncate(17,killwords=True)}}</div>
		</div>

		{% else %}

		<div class="alert

		{% endfor %}
		
</div>

